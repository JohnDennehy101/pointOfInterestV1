<div class="uk-flex uk-flex-center uk-flex-middle uk-grid-small" uk-grid>
    {{> title-card title="Admin User" subTitle="Admin Dashboard"}}
    {{> main-menu }}
</div>

<div class="uk-container uk-margin">

    <div class="uk-width-expand@m">
        <h1 class="uk-heading">Application Overview</h1>
    </div>


    <div class="uk-divider-icon"></div>


    <div class="uk-child-width-expand@s uk-text-center uk-margin" uk-grid>
        <div>
            <div class="uk-card uk-card-default uk-card-body">
                <h5>Total Number of Monuments</h5>

                {{!-- <img src="../images/rain.png" width="50"> --}}
                <i class="fas fa-monument fa-2x"></i>

                <p>{{allMonumentsCount}}</p>

            </div>
        </div>
        <div>
            <div class="uk-card uk-card-default uk-card-body uk-margin">
                <h5>Total Number of Monument Categories</h5>

                <i class="fas fa-list-ul fa-2x"></i>


                <p>{{allCategoriesCount}}</p>
            </div>
        </div>
        <div>
            <div class="uk-card uk-card-default uk-card-body">
                <h5>Total Number of Users</h5>

                <i class="fas fa-users fa-2x"></i>

                <p>{{allUsersCount}}</p>
            </div>
        </div>
    </div>



    <div class="uk-card uk-card-default uk-card-body uk-padding-small">
        <h4 class="uk-text-primary uk-text-center">User Overview</h4>
        <table class="uk-table uk-table-divider">
            <thead>
                <tr>
                    <th class="uk-text-center" style="width: 33.33%">User Name</th>
                    <th class="uk-text-center" style="width: 33.33%">Number of Existing Records</th>
                    <th class="uk-text-center" style="width: 33.33%">Last Login</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {{#each allUsers}}
                <tr>

                    <td class="uk-text-center" style="width: 33.33%">{{firstName}} {{lastName}}</td>
                    <td class="uk-text-center" style="width: 33.33%">{{numberOfRecords}}</td>
                    <td class="uk-text-center" style="width: 33.33%">{{lastLogin}}</td>
                    <td>
                        <p style="display: none">{{_id}}</p>
                        <a href="#delete-account-modal" className="deleteUserIcon" uk-toggle dataset="{{_id}}">
                            <i class="fas fa-trash-alt" style="color: red"></i>
                        </a>
                    </td>



                </tr>
                {{/each}}


            </tbody>
        </table>
    </div>


    <div id="delete-account-modal" uk-modal>
        <div class="uk-modal-dialog">
            <button class="uk-modal-close-default" type="button" uk-close></button>
            <div class="uk-modal-header">
                <h2 class="uk-modal-title">Delete Account</h2>
            </div>
            <div class="uk-modal-body">
                <p>Are you sure that you want to delete this account?</p>
            </div>
            <div class="uk-modal-footer uk-text-right">
                <button class="uk-button uk-button-default uk-modal-close" type="button">Cancel</button>
                <form action="" id="deleteAccountForm" method="POST" style="display:inline">
                    <button class="uk-button uk-button-danger" type="submit" formmethod="post"
                        id="confirmationDeleteAccountButton">Delete</button>
                </form>
            </div>
        </div>
    </div>


</div>


<script>
    let deleteAccountForm = document.getElementById('deleteAccountForm')

    document.addEventListener('click', (e) => {

        if (e.target.className == 'fas fa-trash-alt') {

            let accountId = e.path[2].children[0].innerText
            deleteAccountForm.action = `/deleteAccount/${accountId}`

        }
    })
</script>